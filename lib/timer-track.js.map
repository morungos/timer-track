{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/timer-track.coffee"],"names":[],"mappings":"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","file":"timer-track.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","## Main class\n\nclass TimerTrack\n\n  index: null\n\n  queue: []\n\n  events: {}\n\n  constructor: () ->\n    @queue = []\n    @events = {}\n\n  add: (time, data) ->\n    @queue.push {time: time, data: data}\n\n  playEventRecord = {}\n\n  playEvent = (self) ->\n\n    if self.index == null\n      if self.queue.length > 0\n        timeout = self.queue[0].time\n        self.index = 0\n        setTimeout playEvent, timeout, self\n      else\n        self.emit 'end', {}\n      return\n\n    playEventRecord.index = self.index\n    playEventRecord.data = self.queue[self.index].data\n    self.emit 'timer', playEventRecord\n\n    self.index++\n\n    if self.index < self.queue.length\n      timeout = self.queue[self.index].time\n      setTimeout playEvent, timeout, self\n\n    else\n      self.index = null\n      self.emit 'end', {}\n\n\n  play: () ->\n    self = @\n    playEvent(self)\n\n\n  clear: () ->\n    @queue = []\n\n\n  emit: (event, args...) ->\n    return false unless @events[event]\n    listener args... for listener in @events[event]\n    return true\n\n \n  addListener: (event, listener) ->\n    @emit 'newListener', event, listener\n    (@events[event]?=[]).push listener\n    return @\n\n \n  on: (evt, handler) =>\n    @addListener(evt, handler)\n\n\n## Export the class\n\nmodule.exports = TimerTrack"]}